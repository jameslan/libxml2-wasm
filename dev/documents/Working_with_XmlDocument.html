<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Working with XmlDocument | libxml2-wasm</title><meta name="description" content="Documentation for libxml2-wasm"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/jameslan/libxml2-wasm">GITHUB</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">libxml2-wasm</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">libxml2-wasm</a></li><li><a href="Working_with_XmlDocument.html">Working with XmlDocument</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="working-with-xmldocument" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Working with XmlDocument<a href="#working-with-xmldocument" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="query-nodes-with-xpath" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Query Nodes with XPath<a href="#query-nodes-with-xpath" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="../classes/libxml2-wasm.XmlDocument.html" class="tsd-kind-class"><code>XmlDocument</code></a> and <a href="../classes/libxml2-wasm.XmlNode.html" class="tsd-kind-class"><code>XmlNode</code></a>
have <a href="../classes/libxml2-wasm.XmlNode.html#get" class="tsd-kind-method"><code>get</code></a> and <a href="../classes/libxml2-wasm.XmlNode.html#find" class="tsd-kind-method"><code>find</code></a>
that both use XPath to locate nodes.
The difference between these two methods is that <code>get</code> returns the first node it finds,
while <code>find</code> returns all of them.</p>
<p>Here’s an example:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;note&gt;&lt;to&gt;Amy&lt;/to&gt;&lt;to&gt;Bob&lt;/to&gt;&lt;/note&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;to&#39;</span><span class="hl-1">).</span><span class="hl-4">content</span><span class="hl-1">); </span><span class="hl-7">// Amy</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-2">&#39;to&#39;</span><span class="hl-1">).</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">node</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">).</span><span class="hl-0">join</span><span class="hl-1">()); </span><span class="hl-7">// Amy,Bob</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>When an XPath is used many times,
To avoid redundant parsing of XPath strings when using them multiple times,
you could create an <a href="../classes/libxml2-wasm.XmlXPath.html" class="tsd-kind-class"><code>XmlXPath</code></a> object.</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1">, </span><span class="hl-4">XmlXPath</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">xpath</span><span class="hl-1"> = </span><span class="hl-4">XmlXPath</span><span class="hl-1">.</span><span class="hl-0">compile</span><span class="hl-1">(</span><span class="hl-2">&#39;/book/title&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc1</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;book&gt;&lt;title&gt;Harry Potter&lt;/title&gt;&lt;/book&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc2</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;book&gt;&lt;title&gt;Learning XML&lt;/title&gt;&lt;/book&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc1</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">xpath</span><span class="hl-1">).</span><span class="hl-4">content</span><span class="hl-1">); </span><span class="hl-7">// Harry Potter</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc2</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">xpath</span><span class="hl-1">).</span><span class="hl-4">content</span><span class="hl-1">); </span><span class="hl-7">// Learning XML</span><br/><span class="hl-4">doc1</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span><br/><span class="hl-4">doc2</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span><br/><span class="hl-4">xpath</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>Note that, like <code>XmlDocument</code>, <code>XmlXPath</code> owns native memory and requires explicit disposal.</p>
<p>Although <code>get</code> and <code>find</code> can be used to retrieve attributes of an element,
<a href="../classes/libxml2-wasm.XmlElement.html#attr" class="tsd-kind-method"><code>attr()</code></a> and <a href="../classes/libxml2-wasm.XmlElement.html#attrs" class="tsd-kind-accessor"><code>attrs</code></a> could be more efficient.
Instead of analyzing the XPath string,
they directly search the attribute array of the current element.</p>
<p>Here’s an example:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;line from=&quot;left&quot; to=&quot;right&quot;/&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;@from&#39;</span><span class="hl-1">).</span><span class="hl-4">value</span><span class="hl-1">); </span><span class="hl-7">// left</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-0">attr</span><span class="hl-1">(</span><span class="hl-2">&#39;from&#39;</span><span class="hl-1">).</span><span class="hl-4">value</span><span class="hl-1">); </span><span class="hl-7">// left</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-2">&#39;@*&#39;</span><span class="hl-1">).</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">node</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1">).</span><span class="hl-0">join</span><span class="hl-1">()); </span><span class="hl-7">// left,right</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-4">attrs</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">node</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">node</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1">).</span><span class="hl-0">join</span><span class="hl-1">()); </span><span class="hl-7">// left,right</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<a id="traverse-the-xml-dom-tree" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Traverse the XML DOM tree<a href="#traverse-the-xml-dom-tree" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The XML DOM represents an XML document as a hierarchical tree structure.
libxml2-wasm provides different methods and properties so that you can traverse in the tree from any node,</p>
<ul>
<li>Each node has a parent, and the root node’s parent is <code>null</code>.
To access the parent node, use <a href="../classes/libxml2-wasm.XmlNode.html#parent" class="tsd-kind-accessor"><code>XmlNode.parent</code></a>;</li>
<li>An <code>XmlElement</code> may contain children as a linked list.
To find the first and last children of an <code>XmlElement</code>,
use <a href="../classes/libxml2-wasm.XmlElement.html#firstchild" class="tsd-kind-accessor"><code>XmlElement.firstChild</code></a> and <a href="../classes/libxml2-wasm.XmlElement.html#lastchild" class="tsd-kind-accessor"><code>XmlElement.lastChild</code></a>,
respectively;</li>
<li><a href="../classes/libxml2-wasm.XmlTreeNode.html#prev" class="tsd-kind-accessor"><code>XmlTreeNode.prev</code></a> and <a href="../classes/libxml2-wasm.XmlTreeNode.html#next" class="tsd-kind-accessor"><code>XmlTreeNode.next</code></a> allow you to navigate through this linked list.</li>
<li>An <code>XmlElement</code> may also contain attributes and namespace declarations within the opening tag.
To retrieve all attributes, use <a href="../classes/libxml2-wasm.XmlElement.html#attrs" class="tsd-kind-accessor"><code>XmlElement.attrs</code></a>.
To find a specific attribute, use <a href="../classes/libxml2-wasm.XmlElement.html#attr" class="tsd-kind-method"><code>XmlElement.attr()</code></a>.
To retrieve namespace declarations, use <a href="../classes/libxml2-wasm.XmlElement.html#nsdeclarations" class="tsd-kind-accessor"><code>XmlElement.nsDeclarations</code></a>.</li>
</ul>
<p>It’s important to note that the XML format is preserved using <code>XmlText</code>.
For instance, in the following XML example,
the children of the <code>docs</code> element are <code>XmlComment(&quot;First Comment&quot;)</code>, <code>XmlText(&quot;\n  &quot;)</code>, <code>XmlElement(&quot;doc&quot;)</code> and <code>XmlText(&quot;\n&quot;)</code>.</p>
<pre><code><span class="hl-1">&lt;</span><span class="hl-8">docs</span><span class="hl-1">&gt;&lt;!--</span><span class="hl-8">First</span><span class="hl-1"> </span><span class="hl-8">Comment</span><span class="hl-1">--&gt;</span><br/><span class="hl-1">  &lt;</span><span class="hl-4">doc</span><span class="hl-1">/&gt;</span><br/><span class="hl-1">&lt;/</span><span class="hl-4">docs</span><span class="hl-1">&gt;</span>
</code><button>Copy</button></pre>

<a id="validate-xml" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validate XML<a href="#validate-xml" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To validate an XML document against an XSD file, create the validator from the schema first,
then use it to validate the document.</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">fs</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1">, </span><span class="hl-4">XsdValidator</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">schema</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromBuffer</span><span class="hl-1">(</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;schema.xsd&#39;</span><span class="hl-1">));</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">validator</span><span class="hl-1"> = </span><span class="hl-4">XsdValidator</span><span class="hl-1">.</span><span class="hl-0">fromDoc</span><span class="hl-1">(</span><span class="hl-4">schema</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromBuffer</span><span class="hl-1">(</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-2">&#39;document.xml&#39;</span><span class="hl-1">));</span><br/><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-0">validate</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span><br/><span class="hl-4">validator</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span><br/><span class="hl-4">schema</span><span class="hl-1">.</span><span class="hl-0">dispose</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>In the above code snippet, the XSD schema is parsed as an <code>XmlDocument</code> using <code>XmlDocument.fromBuffer</code> first,
and then create a validator using <code>XsdValidator.fromDoc</code>.</p>
<p>Similar to an <code>XmlDocument</code>, the validator needs to be disposed too.</p>
<a id="xsd-includeimport" class="tsd-anchor"></a><h3 class="tsd-anchor-link">XSD Include/Import<a href="#xsd-includeimport" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>xsd:include</code> and <code>xsd:import</code> are supported with virtual IO.
Refer to the <a href="Parsing_and_Serializing.html#virtualio-and-xinclude-experimental">Virtual IO</a> document for more information.</p>
<a id="relax-ng" class="tsd-anchor"></a><h3 class="tsd-anchor-link">RELAX NG<a href="#relax-ng" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>RELAX NG is also supported, with a corresponding validator class <a href="../classes/libxml2-wasm.RelaxNGValidator.html" class="tsd-kind-class"><code>RelaxNGValidator</code></a>.</p>
<a id="modify-xml" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Modify XML<a href="#modify-xml" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>With libxml2-wasm, you can either modify an existing XML document or create a new one from scratch.</p>
<a id="create-an-xml-document" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Create an XML document<a href="#create-an-xml-document" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="../classes/libxml2-wasm.XmlDocument.html#create" class="tsd-kind-method"><code>XmlDocument.create</code></a> to create a new <code>XmlDocument</code>,
and create its root node using <a href="../classes/libxml2-wasm.XmlDocument.html#createroot" class="tsd-kind-method"><code>XmlDocument.createRoot</code></a>.</p>
<p>Here's an example:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">();</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">createRoot</span><span class="hl-1">(</span><span class="hl-2">&#39;doc&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">({ </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> })); </span><span class="hl-7">// &lt;?xml version=&quot;1.0&quot;?&gt;&lt;doc/&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="insert-a-node" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Insert a node<a href="#insert-a-node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you want to insert a new node as a child of an <code>XmlElement</code>,
you can use its methods: <a href="../classes/libxml2-wasm.XmlElement.html#addcomment" class="tsd-kind-method"><code>addComment</code></a>,
<a href="../classes/libxml2-wasm.XmlElement.html#addcdata" class="tsd-kind-method"><code>addCData</code></a>, <a href="../classes/libxml2-wasm.XmlElement.html#addtext" class="tsd-kind-method"><code>addText</code></a>
and <a href="../classes/libxml2-wasm.XmlElement.html#addelement" class="tsd-kind-method"><code>addElement</code></a>.
These methods append the new node to the end of the children list and work even if the <code>XmlElement</code> doesn’t have any children.</p>
<p>However, if you need to add the new node in the middle of the children list,
you can find a child node as a reference point and either,</p>
<ul>
<li>insert a new node in front of it using <a href="../classes/libxml2-wasm.XmlTreeNode.html" class="tsd-kind-class"><code>XmlTreeNode</code></a>'s
<a href="../classes/libxml2-wasm.XmlTreeNode.html#prependcomment" class="tsd-kind-method"><code>prependComment</code></a>,
<a href="../classes/libxml2-wasm.XmlTreeNode.html#prependcdata" class="tsd-kind-method"><code>prependCData</code></a>,
<a href="../classes/libxml2-wasm.XmlTreeNode.html#prependtext" class="tsd-kind-method"><code>prependText</code></a>,
and <a href="../classes/libxml2-wasm.XmlTreeNode.html#prependelement" class="tsd-kind-method"><code>prependElement</code></a>, or</li>
<li>append it behind it using
<a href="../classes/libxml2-wasm.XmlTreeNode.html#appendcomment" class="tsd-kind-method"><code>appendComment</code></a>,
<a href="../classes/libxml2-wasm.XmlTreeNode.html#appendcdata" class="tsd-kind-method"><code>appendCData</code></a>,
<a href="../classes/libxml2-wasm.XmlTreeNode.html#appendtext" class="tsd-kind-method"><code>appendText</code></a>,
and <a href="../classes/libxml2-wasm.XmlTreeNode.html#appendelement" class="tsd-kind-method"><code>appendElement</code></a>.</li>
</ul>
<p>Adding attributes and namespace declarations is different because they are in-tag nodes of <code>XmlElement</code>,
and their order doesn’t affect the semantics.
You can add an attribute using <a href="../classes/libxml2-wasm.XmlElement.html#setattr" class="tsd-kind-method"><code>XmlElement.setAttr</code></a>
and add a namespace declaration using <a href="../classes/libxml2-wasm.XmlElement.html#addnsdeclaration" class="tsd-kind-method"><code>XmlElement.addNsDeclaration</code></a>.</p>
<p>Here’s an example of how to add a comment, an element, and an attribute to an <code>XmlElement</code>:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;books&gt;&lt;book/&gt;&lt;/books&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">book</span><span class="hl-1"> = </span><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-4">firstChild</span><span class="hl-1">;</span><br/><span class="hl-4">book</span><span class="hl-1">.</span><span class="hl-0">prependComment</span><span class="hl-1">(</span><span class="hl-2">&#39;all books&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">book</span><span class="hl-1">.</span><span class="hl-0">appendElement</span><span class="hl-1">(</span><span class="hl-2">&#39;book&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">book</span><span class="hl-1">.</span><span class="hl-0">setAttr</span><span class="hl-1">(</span><span class="hl-2">&#39;order, &#39;</span><span class="hl-9">1</span><span class="hl-2">&#39;)</span><span class="hl-10">;</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">({ </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> }); </span><span class="hl-7">// &#39;&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;books&gt;&lt;!--all books--&gt;&lt;book order=&quot;1&quot;/&gt;&lt;book/&gt;&lt;/books&gt;\n&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="remove-a-node" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Remove a node<a href="#remove-a-node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A node can be removed from the DOM tree by invoking its <a href="../classes/libxml2-wasm.XmlNode.html#remove" class="tsd-kind-method"><code>remove</code></a> method.</p>
<p>Here’s an example of removing the first <code>book</code> element:</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">XmlDocument</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;libxml2-wasm&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">doc</span><span class="hl-1"> = </span><span class="hl-4">XmlDocument</span><span class="hl-1">.</span><span class="hl-0">fromString</span><span class="hl-1">(</span><span class="hl-2">&#39;&lt;books&gt;&lt;book&gt;&lt;title&gt;Harry Potter&lt;/title&gt;&lt;/book&gt;&lt;book/&gt;&lt;/books&gt;&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-4">root</span><span class="hl-1">.</span><span class="hl-4">firstChild</span><span class="hl-1">.</span><span class="hl-0">remove</span><span class="hl-1">();</span><br/><span class="hl-4">doc</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">({ </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> }); </span><span class="hl-7">// &#39;&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;books&gt;&lt;book/&gt;&lt;/books&gt;&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="modify-a-node" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Modify a node<a href="#modify-a-node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Read/write property <a href="../classes/libxml2-wasm.XmlSimpleNode.html#content" class="tsd-kind-accessor"><code>content</code></a>
can be used to update <code>XmlText</code>, <code>XmlComment</code>, or <code>XmlCData</code>.
For <code>XmlAttribute</code>, the <a href="../classes/libxml2-wasm.XmlAttribute.html#value" class="tsd-kind-accessor"><code>value</code></a> property can be used,
and <a href="../classes/libxml2-wasm.XmlAttribute.html#content" class="tsd-kind-accessor"><code>content</code></a> is still provided for backward compatibility and convenience.</p>
<p><a href="../classes/libxml2-wasm.XmlElement.html#content" class="tsd-kind-accessor"><code>XmlElement.contnet</code></a> is read-only
and is used to retrieve the element’s text when it’s simple.
It’s not intended for updating the element.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-internal" name="internal"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Internal</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#working-with-xmldocument"><span>Working with <wbr/>Xml<wbr/>Document</span></a><ul><li><a href="#query-nodes-with-xpath"><span>Query <wbr/>Nodes with XPath</span></a></li><li><a href="#traverse-the-xml-dom-tree"><span>Traverse the XML DOM tree</span></a></li><li><a href="#validate-xml"><span>Validate XML</span></a></li><li><ul><li><a href="#xsd-includeimport"><span>XSD <wbr/>Include/<wbr/>Import</span></a></li><li><a href="#relax-ng"><span>RELAX NG</span></a></li></ul></li><li><a href="#modify-xml"><span>Modify XML</span></a></li><li><ul><li><a href="#create-an-xml-document"><span>Create an XML document</span></a></li><li><a href="#insert-a-node"><span>Insert a node</span></a></li><li><a href="#remove-a-node"><span>Remove a node</span></a></li><li><a href="#modify-a-node"><span>Modify a node</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/jameslan/libxml2-wasm" class="tsd-nav-link">GITHUB</a></nav><nav class="tsd-navigation"><a href="../modules.html">libxml2-wasm</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p><p><script>
function inject() {
    var toolbar = document.getElementById('tsd-toolbar-links');
    var i;
    for (i = 0; i < toolbar.children.length; i++) {
        var e = toolbar.children[i];
        if (e.text == 'GITHUB') {
            e.innerHTML = '<svg width="24" height="24" style="margin-top: 8px;" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" style="fill:currentColor;"></path></svg>';
        }
    };
    var entry = document.getElementsByClassName('title')[0].href;
    fetch(new URL('../versions.json', entry).href)
        .then(function(resp) {
            return resp.json();
        })
        .then(function(versions) {
            var s = document.createElement('select');
            s.onchange = function(event) {
                window.location.href = event.target.value;
            }
            var i;
            for (i = 0; i < versions.length; i++) {
                var e = new URL('index.html', versions[i].url).href;
                var o = document.createElement('option');
                o.text = versions[i].version;
                o.value = versions[i].url;
                if (e == entry) {
                    o.selected = true;
                }
                s.appendChild(o);
            }
            toolbar.insertBefore(s, toolbar.firstChild);
        });
}
window.onload = inject;
</script></p></footer><div class="overlay"></div></body></html>
